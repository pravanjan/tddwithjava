apply plugin : 'java'
apply plugin : 'jacoco'


repositories {
 jcenter()
 }
jacoco {
 toolVersion = "0.8.1"
 reportsDir = file("$buildDir/ReminderJacocoReportDir")
}

jacocoTestReport {
	reports {
	 xml.enabled false
	 csv.enabled false 
	 html.destination file("${buildDir}/jacocoHTML")
	}
	afterEvaluate {
    classDirectories = files(classDirectories.files.collect{
     fileTree(dir: it, exclude : ['reminderPojo/**'])
    })
   }

}
jacocoTestCoverageVerification {
 violationRules {
 
 afterEvaluate {
    classDirectories = files(classDirectories.files.collect{
     fileTree(dir: it, exclude : ['reminderPojo/**'])
    })
    }
  rule {
            limit {
                minimum = 1.0
            }
        }
 	}
}

dependencies {
	testCompile group: 'junit', name: 'junit', version: '4.4'
	testCompile group: 'org.mockito', name: 'mockito-all', version: '2.0.2-beta'
	

}
test {
  testLogging.showStandardStreams = true
}

test.finalizedBy jacocoTestReport
check.dependsOn jacocoTestCoverageVerification	


